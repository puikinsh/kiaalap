<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Sparkline Charts - Compact inline data visualization for dashboard widgets">
    <meta name="keywords" content="sparkline, charts, dashboard, data visualization, inline charts">
    <meta name="author" content="Kiaalap">

    <!-- Preconnect to external domains -->
    <link rel="preconnect" href="https://images.unsplash.com" crossorigin>
    <link rel="preconnect" href="https://ui-avatars.com" crossorigin>
    <link rel="dns-prefetch" href="https://flagcdn.com">

    <title>Sparkline Charts - Kiaalap Dashboard</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="img/favicon.ico">

    <!-- Critical CSS for above-the-fold content -->
    <style>
        /* Critical CSS for immediate render */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: #f5f7fa; }
        .sidebar { position: fixed; left: 0; top: 0; width: 260px; height: 100vh; background: #1f2937; z-index: 1040; }
        .main-wrapper { margin-left: 260px; min-height: 100vh; transition: margin-left 0.3s ease; }
        .top-navbar { background: white; height: 64px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .dashboard-content { padding: 24px; }

        /* Loading animation */
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .loading { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; background: #e5e7eb; }
    </style>

    <!-- Load stylesheets -->
    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="node_modules/bootstrap-icons/font/bootstrap-icons.css">
    <link rel="stylesheet" href="src/css/dashboard.css">
    <link rel="stylesheet" href="src/css/charts-layout.css">
</head>
<body>
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="visually-hidden-focusable">Skip to main content</a>

    <!-- Required DOM elements for dashboard.js -->
    <div class="search-backdrop" id="searchBackdrop"></div>
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-brand">
                <h5>
                    <i class="bi bi-mortarboard-fill"></i>
                    Kiaalap
                </h5>
                <button class="sidebar-close" id="sidebarClose">
                    <i class="bi bi-x-lg"></i>
                </button>
            </div>
        </div>

        <nav class="sidebar-nav">
            <div class="menu-section">
                <div class="menu-section-title">Main</div>
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link has-submenu" href="#dashboard" data-bs-target="#dashboardSubmenu" aria-expanded="false">
                            <i class="bi bi-speedometer2"></i>
                            <span>Dashboard</span>
                        </a>
                        <ul id="dashboardSubmenu" class="submenu collapse list-unstyled">
                            <li><a class="nav-link" href="index.html">Dashboard v.1</a></li>
                            <li><a class="nav-link" href="index-1.html">Dashboard v.2</a></li>
                            <li><a class="nav-link" href="index-2.html">Dashboard v.3</a></li>
                            <li><a class="nav-link" href="analytics.html">Analytics</a></li>
                            <li><a class="nav-link" href="widgets.html">Widgets</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="events.html">
                            <i class="bi bi-calendar-event"></i>
                            <span>Events</span>
                        </a>
                    </li>
                </ul>
            </div>

            <div class="menu-section">
                <div class="menu-section-title">Academic</div>
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link has-submenu" href="#professors" data-bs-target="#professorsSubmenu" aria-expanded="false">
                            <i class="bi bi-person-badge"></i>
                            <span>Professors</span>
                        </a>
                        <ul id="professorsSubmenu" class="submenu collapse list-unstyled">
                            <li><a class="nav-link" href="all-professors.html">All Professors</a></li>
                            <li><a class="nav-link" href="add-professor.html">Add Professor</a></li>
                            <li><a class="nav-link" href="edit-professor.html">Edit Professor</a></li>
                            <li><a class="nav-link" href="professor-profile.html">Professor Profile</a></li>
                        </ul>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link has-submenu" href="#students" data-bs-target="#studentsSubmenu" aria-expanded="false">
                            <i class="bi bi-people"></i>
                            <span>Students</span>
                        </a>
                        <ul id="studentsSubmenu" class="submenu collapse list-unstyled">
                            <li><a class="nav-link" href="all-students.html">All Students</a></li>
                            <li><a class="nav-link" href="add-student.html">Add Student</a></li>
                            <li><a class="nav-link" href="edit-student.html">Edit Student</a></li>
                            <li><a class="nav-link" href="student-profile.html">Student Profile</a></li>
                        </ul>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link has-submenu" href="#courses" data-bs-target="#coursesSubmenu" aria-expanded="false">
                            <i class="bi bi-book"></i>
                            <span>Courses</span>
                        </a>
                        <ul id="coursesSubmenu" class="submenu collapse list-unstyled">
                            <li><a class="nav-link" href="all-courses.html">All Courses</a></li>
                            <li><a class="nav-link" href="add-course.html">Add Course</a></li>
                            <li><a class="nav-link" href="edit-course.html">Edit Course</a></li>
                            <li><a class="nav-link" href="course-info.html">Course Info</a></li>
                            <li><a class="nav-link" href="course-payment.html">Course Payment</a></li>
                        </ul>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link has-submenu" href="#library" data-bs-target="#librarySubmenu" aria-expanded="false">
                            <i class="bi bi-journal-bookmark"></i>
                            <span>Library</span>
                        </a>
                        <ul id="librarySubmenu" class="submenu collapse list-unstyled">
                            <li><a class="nav-link" href="library-assets.html">Library Assets</a></li>
                            <li><a class="nav-link" href="add-library-assets.html">Add Asset</a></li>
                            <li><a class="nav-link" href="edit-library-assets.html">Edit Asset</a></li>
                        </ul>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link has-submenu" href="#departments" data-bs-target="#departmentsSubmenu" aria-expanded="false">
                            <i class="bi bi-building"></i>
                            <span>Departments</span>
                        </a>
                        <ul id="departmentsSubmenu" class="submenu collapse list-unstyled">
                            <li><a class="nav-link" href="departments.html">All Departments</a></li>
                            <li><a class="nav-link" href="add-department.html">Add Department</a></li>
                            <li><a class="nav-link" href="edit-department.html">Edit Department</a></li>
                        </ul>
                    </li>
                </ul>
            </div>

            <div class="menu-section">
                <div class="menu-section-title">Communication</div>
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link has-submenu" href="#mailbox" data-bs-target="#mailboxSubmenu" aria-expanded="false">
                            <i class="bi bi-envelope"></i>
                            <span>Mailbox</span>
                        </a>
                        <ul id="mailboxSubmenu" class="submenu collapse list-unstyled">
                            <li><a class="nav-link" href="mailbox.html">Inbox</a></li>
                            <li><a class="nav-link" href="mailbox-compose.html">Compose</a></li>
                            <li><a class="nav-link" href="mailbox-view.html">View Mail</a></li>
                        </ul>
                    </li>
                </ul>
            </div>

            <div class="menu-section">
                <div class="menu-section-title">Interface</div>
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link has-submenu" href="#interface" data-bs-target="#interfaceSubmenu" aria-expanded="false">
                            <i class="bi bi-palette"></i>
                            <span>Interface</span>
                        </a>
                        <ul id="interfaceSubmenu" class="submenu collapse list-unstyled">
                            <li><a class="nav-link" href="buttons.html">Buttons</a></li>
                            <li><a class="nav-link" href="alerts.html">Alerts</a></li>
                            <li><a class="nav-link" href="modals.html">Modals</a></li>
                            <li><a class="nav-link" href="tabs.html">Tabs</a></li>
                            <li><a class="nav-link" href="accordion.html">Accordion</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link has-submenu active" href="#charts" data-bs-target="#chartsSubmenu" aria-expanded="true">
                            <i class="bi bi-graph-up"></i>
                            <span>Charts</span>
                        </a>
                        <ul id="chartsSubmenu" class="submenu collapse show list-unstyled">
                            <li><a class="nav-link" href="bar-charts.html">Bar Charts</a></li>
                            <li><a class="nav-link" href="line-charts.html">Line Charts</a></li>
                            <li><a class="nav-link" href="area-charts.html">Area Charts</a></li>
                            <li><a class="nav-link" href="c3.html">C3 Charts</a></li>
                            <li><a class="nav-link active" href="sparkline.html">Sparkline Charts</a></li>
                            <li><a class="nav-link" href="peity.html">Peity Charts</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link has-submenu" href="#data-tables" data-bs-target="#dataTablesSubmenu" aria-expanded="false">
                            <i class="bi bi-table"></i>
                            <span>Data Tables</span>
                        </a>
                        <ul id="dataTablesSubmenu" class="submenu collapse list-unstyled">
                            <li><a class="nav-link" href="static-table.html">Static Table</a></li>
                            <li><a class="nav-link" href="data-table.html">Data Table</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link has-submenu" href="#forms" data-bs-target="#formsSubmenu" aria-expanded="false">
                            <i class="bi bi-file-text"></i>
                            <span>Forms</span>
                        </a>
                        <ul id="formsSubmenu" class="submenu collapse list-unstyled">
                            <li><a class="nav-link" href="basic-form-element.html">Basic Form Elements</a></li>
                            <li><a class="nav-link" href="advance-form-element.html">Advanced Form Elements</a></li>
                            <li><a class="nav-link" href="password-meter.html">Password Meter</a></li>
                            <li><a class="nav-link" href="multi-upload.html">Multi Upload</a></li>
                            <li><a class="nav-link" href="tinymc.html">Text Editor</a></li>
                            <li><a class="nav-link" href="dual-list-box.html">Dual List Box</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link has-submenu" href="#app-views" data-bs-target="#appViewsSubmenu" aria-expanded="false">
                            <i class="bi bi-window-stack"></i>
                            <span>App Views</span>
                        </a>
                        <ul id="appViewsSubmenu" class="submenu collapse list-unstyled">
                            <li><a class="nav-link" href="notifications.html">Notifications</a></li>
                            <li><a class="nav-link" href="pdf-viewer.html">PDF Viewer</a></li>
                            <li><a class="nav-link" href="code-editor.html">Code Editor</a></li>
                            <li><a class="nav-link" href="tinymc.html">Rich Editor</a></li>
                            <li><a class="nav-link" href="tree-view.html">Tree View</a></li>
                        </ul>
                    </li>
                </ul>
            </div>

            <div class="menu-section">
                <div class="menu-section-title">Maps</div>
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link" href="google-map.html">
                            <i class="bi bi-geo-alt"></i>
                            <span>Google Maps</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="data-maps.html">
                            <i class="bi bi-map"></i>
                            <span>Data Maps</span>
                        </a>
                    </li>
                </ul>
            </div>

            <div class="menu-section">
                <div class="menu-section-title">Pages</div>
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link has-submenu" href="#pages" data-bs-target="#pagesSubmenu" aria-expanded="false">
                            <i class="bi bi-file-earmark"></i>
                            <span>Pages</span>
                        </a>
                        <ul id="pagesSubmenu" class="submenu collapse list-unstyled">
                            <li><a class="nav-link" href="login.html">Login</a></li>
                            <li><a class="nav-link" href="register.html">Register</a></li>
                            <li><a class="nav-link" href="lock.html">Lock Screen</a></li>
                            <li><a class="nav-link" href="password-recovery.html">Password Recovery</a></li>
                            <li><a class="nav-link" href="404.html">404 Page</a></li>
                            <li><a class="nav-link" href="500.html">500 Page</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
    </aside>

    <!-- Main Content Wrapper -->
    <div class="main-wrapper" id="mainWrapper">
        <!-- Top Navigation -->
        <nav class="navbar top-navbar">
            <div class="container-fluid d-flex align-items-center h-100">
                <!-- Mobile sidebar toggle -->
                <button class="hamburger-menu" id="sidebarToggle">
                    <i class="bi bi-list"></i>
                </button>

                <!-- Search -->
                <div class="search-wrapper">
                    <button class="search-toggle" id="searchToggle">
                        <i class="bi bi-search"></i>
                    </button>
                    <div class="search-box" id="searchBox">
                        <input type="text" class="search-input" placeholder="Search charts, data, or navigate to...">
                        <div class="search-suggestions" id="searchSuggestions"></div>
                    </div>
                </div>

                <!-- Header actions -->
                <div class="ms-auto d-flex align-items-center">
                    <!-- Messages -->
                    <div class="dropdown me-3">
                        <button class="header-action-btn position-relative" data-bs-toggle="dropdown">
                            <i class="bi bi-chat-left-dots"></i>
                            <span class="badge bg-primary badge-notification">4</span>
                        </button>
                        <div class="dropdown-menu dropdown-menu-end messages-dropdown">
                            <h6 class="dropdown-header">Messages</h6>
                            <div class="message-item">
                                <img src="https://ui-avatars.com/api/?name=Sarah+Johnson&background=06d6a0&color=fff&size=40" alt="Sarah" class="message-avatar">
                                <div class="message-content">
                                    <div class="message-header">
                                        <span class="message-sender">Sarah Johnson</span>
                                        <span class="message-time">2 min</span>
                                    </div>
                                    <p class="message-text">New student enrollment completed</p>
                                </div>
                            </div>
                            <div class="dropdown-divider"></div>
                            <a href="mailbox.html" class="dropdown-item text-center">View all messages</a>
                        </div>
                    </div>

                    <!-- Notifications -->
                    <div class="dropdown me-3">
                        <button class="header-action-btn position-relative" data-bs-toggle="dropdown">
                            <i class="bi bi-bell"></i>
                            <span class="badge bg-danger badge-notification">3</span>
                        </button>
                        <div class="dropdown-menu dropdown-menu-end notifications-dropdown">
                            <h6 class="dropdown-header">Notifications</h6>
                            <div class="notification-item">
                                <div class="notification-icon bg-primary">
                                    <i class="bi bi-graph-up"></i>
                                </div>
                                <div class="notification-content">
                                    <p class="notification-text">Student performance metrics updated</p>
                                    <span class="notification-time">5 minutes ago</span>
                                </div>
                            </div>
                            <div class="dropdown-divider"></div>
                            <a href="notifications.html" class="dropdown-item text-center">View all notifications</a>
                        </div>
                    </div>

                    <!-- User Menu -->
                    <div class="dropdown">
                        <button class="user-menu" data-bs-toggle="dropdown">
                            <img src="https://ui-avatars.com/api/?name=John+Doe&background=4361ee&color=fff&size=40" alt="User" class="user-avatar">
                            <div class="user-info">
                                <span class="user-name">John Doe</span>
                                <span class="user-role">Administrator</span>
                            </div>
                            <i class="bi bi-chevron-down"></i>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="#"><i class="bi bi-person me-2"></i>Profile</a></li>
                            <li><a class="dropdown-item" href="#"><i class="bi bi-gear me-2"></i>Settings</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#"><i class="bi bi-box-arrow-right me-2"></i>Logout</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Dashboard Content -->
        <main class="dashboard-content" id="main-content" role="main">
            <!-- Breadcrumb -->
            <nav aria-label="breadcrumb" class="breadcrumb-nav">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                        <a href="index.html">
                            <i class="bi bi-house-door"></i>
                            <span>Home</span>
                        </a>
                    </li>
                    <li class="breadcrumb-item">
                        <a href="#charts">Charts</a>
                    </li>
                    <li class="breadcrumb-item active" aria-current="page">Sparkline Charts</li>
                </ol>
            </nav>

            <!-- Page Header -->
            <div class="page-header">
                <div class="page-header-content">
                    <h1 class="page-title">Sparkline Charts</h1>
                    <p class="page-description">Compact inline data visualization perfect for dashboard widgets and metric displays</p>
                </div>
            </div>

            <!-- Dashboard Grid -->
            <div class="dashboard-row">
                <!-- Key Metrics with Sparklines -->
                <div class="dashboard-grid dashboard-grid-md-12">
                    <div class="chart-wrapper">
                        <div class="dashboard-card-header">
                            <h5 class="dashboard-card-title">Key Performance Metrics</h5>
                            <p class="dashboard-card-subtitle">Real-time metrics with trend indicators</p>
                        </div>
                        <div class="chart-container-main">
                            <div class="sparkline-metrics-grid">
                                <div class="metric-card">
                                    <div class="metric-header">
                                        <span class="metric-label">Total Students</span>
                                        <span class="trend-indicator trend-up">
                                            <i class="bi bi-arrow-up"></i> +12%
                                        </span>
                                    </div>
                                    <div class="metric-value">1,234</div>
                                    <div class="sparkline-chart" id="studentsSparkline"></div>
                                </div>

                                <div class="metric-card">
                                    <div class="metric-header">
                                        <span class="metric-label">Course Completion</span>
                                        <span class="trend-indicator trend-up">
                                            <i class="bi bi-arrow-up"></i> +8%
                                        </span>
                                    </div>
                                    <div class="metric-value">87%</div>
                                    <div class="sparkline-chart" id="completionSparkline"></div>
                                </div>

                                <div class="metric-card">
                                    <div class="metric-header">
                                        <span class="metric-label">Revenue</span>
                                        <span class="trend-indicator trend-up">
                                            <i class="bi bi-arrow-up"></i> +15%
                                        </span>
                                    </div>
                                    <div class="metric-value">$45.2K</div>
                                    <div class="sparkline-chart" id="revenueSparkline"></div>
                                </div>

                                <div class="metric-card">
                                    <div class="metric-header">
                                        <span class="metric-label">Active Professors</span>
                                        <span class="trend-indicator trend-down">
                                            <i class="bi bi-arrow-down"></i> -3%
                                        </span>
                                    </div>
                                    <div class="metric-value">89</div>
                                    <div class="sparkline-chart" id="professorsSparkline"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Academic Performance -->
                <div class="dashboard-grid dashboard-grid-md-6">
                    <div class="chart-wrapper">
                        <div class="dashboard-card-header">
                            <h5 class="dashboard-card-title">Academic Performance</h5>
                            <p class="dashboard-card-subtitle">Student achievement trends</p>
                        </div>
                        <div class="chart-container-main">
                            <div class="metric-card">
                                <div class="metric-header">
                                    <span class="metric-label">Average GPA</span>
                                    <span class="trend-indicator trend-up">
                                        <i class="bi bi-arrow-up"></i> +0.2
                                    </span>
                                </div>
                                <div class="metric-value">3.45</div>
                                <div class="sparkline-chart" id="gpaSparkline"></div>
                            </div>

                            <div class="metric-card">
                                <div class="metric-header">
                                    <span class="metric-label">Attendance Rate</span>
                                    <span class="trend-indicator trend-up">
                                        <i class="bi bi-arrow-up"></i> +5%
                                    </span>
                                </div>
                                <div class="metric-value">92%</div>
                                <div class="sparkline-chart" id="attendanceSparkline"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Financial Overview -->
                <div class="dashboard-grid dashboard-grid-md-6">
                    <div class="chart-wrapper">
                        <div class="dashboard-card-header">
                            <h5 class="dashboard-card-title">Financial Overview</h5>
                            <p class="dashboard-card-subtitle">Revenue and cost analysis</p>
                        </div>
                        <div class="chart-container-main">
                            <div class="metric-card">
                                <div class="metric-header">
                                    <span class="metric-label">Monthly Tuition</span>
                                    <span class="trend-indicator trend-up">
                                        <i class="bi bi-arrow-up"></i> +18%
                                    </span>
                                </div>
                                <div class="metric-value">$125K</div>
                                <div class="sparkline-chart" id="tuitionSparkline"></div>
                            </div>

                            <div class="metric-card">
                                <div class="metric-header">
                                    <span class="metric-label">Operational Costs</span>
                                    <span class="trend-indicator trend-down">
                                        <i class="bi bi-arrow-down"></i> -7%
                                    </span>
                                </div>
                                <div class="metric-value">$78K</div>
                                <div class="sparkline-chart" id="costsSparkline"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <script src="node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.min.js"></script>
    <script src="src/js/dashboard.js"></script>

    <!-- Sparkline Charts JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Sparkline configuration
            const sparklineOptions = {
                type: 'line',
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: 1000,
                        easing: 'easeInOutQuart'
                    },
                    scales: {
                        x: { display: false },
                        y: { display: false }
                    },
                    plugins: { legend: { display: false } },
                    elements: {
                        point: { radius: 0, hitRadius: 10 },
                        line: { borderWidth: 2, tension: 0.3 }
                    },
                    interaction: { intersect: false }
                }
            };

            // Generate sample sparkline data
            function generateSparklineData(trend = 'up', points = 20, volatility = 0.3) {
                const data = [];
                let value = Math.random() * 50 + 25;

                for (let i = 0; i < points; i++) {
                    const change = (Math.random() - 0.5) * volatility * 10;
                    const trendChange = trend === 'up' ? 0.5 : -0.5;
                    value = Math.max(5, Math.min(95, value + change + trendChange));
                    data.push(Math.round(value));
                }

                return data;
            }

            // Initialize sparkline charts
            const sparklines = [
                {
                    id: 'studentsSparkline',
                    color: '#4361ee',
                    trend: 'up'
                },
                {
                    id: 'completionSparkline',
                    color: '#06d6a0',
                    trend: 'up'
                },
                {
                    id: 'revenueSparkline',
                    color: '#f72585',
                    trend: 'up'
                },
                {
                    id: 'professorsSparkline',
                    color: '#ffa726',
                    trend: 'down'
                },
                {
                    id: 'gpaSparkline',
                    color: '#4cc9f0',
                    trend: 'up'
                },
                {
                    id: 'attendanceSparkline',
                    color: '#06d6a0',
                    trend: 'up'
                },
                {
                    id: 'tuitionSparkline',
                    color: '#4361ee',
                    trend: 'up'
                },
                {
                    id: 'costsSparkline',
                    color: '#f72585',
                    trend: 'down'
                }
            ];

            sparklines.forEach(sparkline => {
                const canvas = document.getElementById(sparkline.id);
                if (canvas) {
                    new Chart(canvas, {
                        ...sparklineOptions,
                        data: {
                            labels: Array.from({length: 20}, (_, i) => i),
                            datasets: [{
                                data: generateSparklineData(sparkline.trend),
                                borderColor: sparkline.color,
                                backgroundColor: sparkline.color + '20',
                                fill: true
                            }]
                        }
                    });
                }
            });

            // Auto-refresh sparklines every 15 seconds
            setInterval(() => {
                sparklines.forEach(sparkline => {
                    const canvas = document.getElementById(sparkline.id);
                    if (canvas) {
                        const chart = Chart.getChart(canvas);
                        if (chart) {
                            const lastValue = chart.data.datasets[0].data[19];
                            const newValue = Math.max(5, Math.min(95, lastValue + (Math.random() - 0.5) * 8));

                            chart.data.datasets[0].data.push(Math.round(newValue));
                            chart.data.datasets[0].data.shift();
                            chart.update('none');
                        }
                    }
                });
            }, 15000);
        });
    </script>

    <!-- Custom CSS for sparkline styling -->
    <style>
        .sparkline-metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .metric-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            transform: translateY(-2px);
        }

        .metric-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .metric-label {
            font-size: 0.875rem;
            color: #6c757d;
            font-weight: 500;
        }

        .trend-indicator {
            font-size: 0.75rem;
            padding: 4px 8px;
            border-radius: 12px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 2px;
        }

        .trend-up {
            background-color: rgba(6, 214, 160, 0.1);
            color: #06d6a0;
        }

        .trend-down {
            background-color: rgba(247, 37, 133, 0.1);
            color: #f72585;
        }

        .metric-value {
            font-size: 2rem;
            font-weight: 700;
            color: #212529;
            margin-bottom: 15px;
            line-height: 1;
        }

        .sparkline-chart {
            height: 60px;
            position: relative;
        }

        .sparkline-chart canvas {
            border-radius: 6px;
        }

        @media (max-width: 768px) {
            .sparkline-metrics-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .metric-card {
                padding: 16px;
            }

            .metric-value {
                font-size: 1.5rem;
            }
        }
    </style>
</body>
</html>