<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Add Department - Kiaalap Education Management System">
    <meta name="keywords" content="education, department, add, university, management">
    <meta name="author" content="Kiaalap">

    <title>Add Department | Kiaalap - Education Management System</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">

    <!-- Critical CSS for immediate render -->
    <style>*{box-sizing:border-box;margin:0;padding:0}body{background:#f5f7fa;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.sidebar{background:#1f2937;height:100vh;left:0;position:fixed;top:0;width:260px;z-index:1040}.main-wrapper{margin-left:260px;min-height:100vh;transition:margin-left .3s ease}.top-navbar{background:#fff;box-shadow:0 1px 3px rgba(0,0,0,.1);height:64px}.dashboard-content{padding:24px}@keyframes pulse{0%,to{opacity:1}50%{opacity:.5}}.loading{animation:pulse 2s cubic-bezier(.4,0,.6,1) infinite;background:#e5e7eb}</style>

    <!-- Stylesheets -->
  <link rel="stylesheet" crossorigin href="./assets/bootstrap-C31-XpK9.css">
  <link rel="stylesheet" crossorigin href="./assets/bootstrap-icons--Sisaltn.css">
  <link rel="stylesheet" crossorigin href="./assets/dashboard-DOMAAUp6.css">
  <link rel="stylesheet" crossorigin href="./assets/charts-layout-CS7VU_kX.css">
</head>
<body>
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="visually-hidden-focusable">Skip to main content</a>

    <!-- Search Backdrop -->
    <div class="search-backdrop" id="searchBackdrop"></div>

    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-brand">
                <h5>
                    <i class="bi bi-mortarboard-fill"></i>
                    Kiaalap
                </h5>
                <button class="sidebar-close" id="sidebarClose">
                    <i class="bi bi-x-lg"></i>
                </button>
            </div>
        </div>

        <nav class="sidebar-nav">
            <div class="menu-section">
                <div class="menu-section-title">Main</div>
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link has-submenu" href="#dashboard" data-bs-target="#dashboardSubmenu" aria-expanded="false">
                            <i class="bi bi-speedometer2"></i>
                            <span>Dashboard</span>
                        </a>
                        <ul id="dashboardSubmenu" class="submenu collapse list-unstyled">
                            <li><a class="nav-link" href="index.html">Dashboard v.1</a></li>
                            <li><a class="nav-link" href="index-1.html">Dashboard v.2</a></li>
                            <li><a class="nav-link" href="index-2.html">Dashboard v.3</a></li>
                            <li><a class="nav-link" href="analytics.html">Analytics</a></li>
                            <li><a class="nav-link" href="widgets.html">Widgets</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="events.html">
                            <i class="bi bi-calendar-event"></i>
                            <span>Events</span>
                        </a>
                    </li>
                </ul>
            </div>

            <div class="menu-section">
                <div class="menu-section-title">Academic</div>
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link has-submenu" href="#professors" data-bs-target="#professorsSubmenu" aria-expanded="false">
                            <i class="bi bi-person-badge"></i>
                            <span>Professors</span>
                        </a>
                        <ul id="professorsSubmenu" class="submenu collapse list-unstyled">
                            <li><a class="nav-link" href="all-professors.html">All Professors</a></li>
                            <li><a class="nav-link" href="add-professor.html">Add Professor</a></li>
                            <li><a class="nav-link" href="edit-professor.html">Edit Professor</a></li>
                            <li><a class="nav-link" href="professor-profile.html">Professor Profile</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link has-submenu" href="#students" data-bs-target="#studentsSubmenu" aria-expanded="false">
                            <i class="bi bi-people"></i>
                            <span>Students</span>
                        </a>
                        <ul id="studentsSubmenu" class="submenu collapse list-unstyled">
                            <li><a class="nav-link" href="all-students.html">All Students</a></li>
                            <li><a class="nav-link" href="add-student.html">Add Student</a></li>
                            <li><a class="nav-link" href="edit-student.html">Edit Student</a></li>
                            <li><a class="nav-link" href="student-profile.html">Student Profile</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link has-submenu" href="#courses" data-bs-target="#coursesSubmenu" aria-expanded="false">
                            <i class="bi bi-book"></i>
                            <span>Courses</span>
                        </a>
                        <ul id="coursesSubmenu" class="submenu collapse list-unstyled">
                            <li><a class="nav-link" href="all-courses.html">All Courses</a></li>
                            <li><a class="nav-link" href="add-course.html">Add Course</a></li>
                            <li><a class="nav-link" href="edit-course.html">Edit Course</a></li>
                            <li><a class="nav-link" href="course-info.html">Course Info</a></li>
                            <li><a class="nav-link" href="course-payment.html">Course Payment</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link has-submenu" href="#library" data-bs-target="#librarySubmenu" aria-expanded="false">
                            <i class="bi bi-journal-bookmark"></i>
                            <span>Library</span>
                        </a>
                        <ul id="librarySubmenu" class="submenu collapse list-unstyled">
                            <li><a class="nav-link" href="library-assets.html">Library Assets</a></li>
                            <li><a class="nav-link" href="add-library-assets.html">Add Library Asset</a></li>
                            <li><a class="nav-link" href="edit-library-assets.html">Edit Library Asset</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link has-submenu active" href="#departments" data-bs-target="#departmentsSubmenu" aria-expanded="true">
                            <i class="bi bi-building"></i>
                            <span>Departments</span>
                        </a>
                        <ul id="departmentsSubmenu" class="submenu collapse show list-unstyled">
                            <li><a class="nav-link" href="departments.html">All Departments</a></li>
                            <li><a class="nav-link active" href="add-department.html">Add Department</a></li>
                            <li><a class="nav-link" href="edit-department.html">Edit Department</a></li>
                        </ul>
                    </li>
                </ul>
            </div>

            <div class="menu-section">
                <div class="menu-section-title">Communication</div>
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link has-submenu" href="#mailbox" data-bs-target="#mailboxSubmenu" aria-expanded="false">
                            <i class="bi bi-envelope"></i>
                            <span>Mailbox</span>
                        </a>
                        <ul id="mailboxSubmenu" class="submenu collapse list-unstyled">
                            <li><a class="nav-link" href="mailbox.html">Inbox</a></li>
                            <li><a class="nav-link" href="mailbox-view.html">View Mail</a></li>
                            <li><a class="nav-link" href="mailbox-compose.html">Compose Mail</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
    </aside>

    <!-- Main Content Wrapper -->
    <div class="main-wrapper" id="mainWrapper">
        <!-- Header -->
        <nav class="navbar top-navbar">
            <div class="container-fluid d-flex align-items-center h-100">
                <!-- Hamburger Menu -->
                <button class="hamburger-menu" id="sidebarToggle">
                    <i class="bi bi-list"></i>
                </button>

                <!-- Breadcrumb for desktop -->
                <nav aria-label="breadcrumb" class="d-none d-lg-block ms-3">
                    <ol class="breadcrumb mb-0">
                        <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                        <li class="breadcrumb-item"><a href="departments.html">Departments</a></li>
                        <li class="breadcrumb-item active">Add Department</li>
                    </ol>
                </nav>

                <!-- Logo for mobile -->
                <div class="navbar-brand d-lg-none fw-bold me-auto">Kiaalap</div>

                <!-- Spacer for desktop -->
                <div class="flex-grow-1 d-none d-lg-block"></div>

                <!-- Right Actions -->
                <div class="d-flex align-items-center gap-2">
                    <!-- Search -->
                    <div class="search-container">
                        <button class="btn btn-light btn-icon" id="searchToggle">
                            <i class="bi bi-search"></i>
                        </button>

                        <form class="search-form" id="searchForm">
                            <i class="bi bi-search search-icon"></i>
                            <input type="text"
                                   class="form-control"
                                   id="searchInput"
                                   placeholder="Search..."
                                   data-bs-toggle="dropdown">
                            <button type="button" class="close-search" id="closeSearch">
                                <i class="bi bi-x-lg"></i>
                            </button>

                            <ul class="dropdown-menu w-100 mt-2">
                                <li><a class="dropdown-item" href="#">Student Registration</a></li>
                                <li><a class="dropdown-item" href="#">Course Schedule</a></li>
                                <li><a class="dropdown-item" href="#">Grade Reports</a></li>
                            </ul>
                        </form>
                    </div>

                    <!-- Quick Actions -->
                    <button class="btn btn-primary btn-sm hide-mobile">
                        <i class="bi bi-plus-circle me-1"></i> New
                    </button>

                    <!-- Messages -->
                    <div class="dropdown">
                        <button class="btn btn-light btn-icon position-relative"
                                data-bs-toggle="dropdown">
                            <i class="bi bi-chat-dots"></i>
                            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-primary"
                                  style="font-size: 0.625rem;">5</span>
                        </button>
                        <div class="dropdown-menu dropdown-menu-end">
                            <div class="px-3 py-2 border-bottom">
                                <h6 class="mb-0">Messages</h6>
                            </div>
                            <div class="p-2" style="max-height: 300px; overflow-y: auto;">
                                <a href="#" class="notification-item">
                                    <img src="https://ui-avatars.com/api/?name=Sarah+Johnson&background=10b981&color=fff"
                                         class="rounded-circle"
                                         width="36"
                                         height="36"
                                         alt="Sarah">
                                    <div class="flex-grow-1">
                                        <div class="fw-semibold small">Sarah Johnson</div>
                                        <div class="text-muted small">Can you review my thesis?</div>
                                        <div class="text-muted" style="font-size: 0.7rem;">2 min ago</div>
                                    </div>
                                </a>
                                <a href="#" class="notification-item">
                                    <img src="https://ui-avatars.com/api/?name=Mike+Chen&background=6366f1&color=fff"
                                         class="rounded-circle"
                                         width="36"
                                         height="36"
                                         alt="Mike">
                                    <div class="flex-grow-1">
                                        <div class="fw-semibold small">Mike Chen</div>
                                        <div class="text-muted small">Meeting at 3 PM today</div>
                                        <div class="text-muted" style="font-size: 0.7rem;">1 hour ago</div>
                                    </div>
                                </a>
                            </div>
                            <div class="border-top p-2 text-center">
                                <a href="#" class="text-primary small">View All Messages</a>
                            </div>
                        </div>
                    </div>

                    <!-- Notifications -->
                    <div class="dropdown">
                        <button class="btn btn-light btn-icon position-relative"
                                data-bs-toggle="dropdown">
                            <i class="bi bi-bell"></i>
                            <span class="notification-dot"></span>
                        </button>
                        <div class="dropdown-menu dropdown-menu-end">
                            <div class="px-3 py-2 border-bottom">
                                <h6 class="mb-0">Notifications</h6>
                            </div>
                            <div class="p-2" style="max-height: 350px; overflow-y: auto;">
                                <a href="#" class="notification-item">
                                    <div class="notification-icon bg-primary bg-opacity-10 text-primary">
                                        <i class="bi bi-calendar-check"></i>
                                    </div>
                                    <div class="flex-grow-1">
                                        <div class="fw-semibold small">New Event</div>
                                        <div class="text-muted small">Science Fair on March 15</div>
                                        <div class="text-muted" style="font-size: 0.7rem;">5 minutes ago</div>
                                    </div>
                                </a>
                                <a href="#" class="notification-item">
                                    <div class="notification-icon bg-success bg-opacity-10 text-success">
                                        <i class="bi bi-check-circle"></i>
                                    </div>
                                    <div class="flex-grow-1">
                                        <div class="fw-semibold small">Assignment Submitted</div>
                                        <div class="text-muted small">John submitted his project</div>
                                        <div class="text-muted" style="font-size: 0.7rem;">2 hours ago</div>
                                    </div>
                                </a>
                                <a href="#" class="notification-item">
                                    <div class="notification-icon bg-warning bg-opacity-10 text-warning">
                                        <i class="bi bi-exclamation-triangle"></i>
                                    </div>
                                    <div class="flex-grow-1">
                                        <div class="fw-semibold small">System Alert</div>
                                        <div class="text-muted small">Database backup completed</div>
                                        <div class="text-muted" style="font-size: 0.7rem;">Yesterday</div>
                                    </div>
                                </a>
                            </div>
                            <div class="border-top p-2 text-center">
                                <a href="#" class="text-primary small">View All Notifications</a>
                            </div>
                        </div>
                    </div>

                    <!-- User Menu -->
                    <div class="dropdown">
                        <button class="btn btn-light d-flex align-items-center px-2 btn-icon"
                                data-bs-toggle="dropdown">
                            <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&h=100&fit=crop&crop=faces"
                                 alt="User"
                                 class="user-avatar"
                                 loading="lazy"
                                 width="32"
                                 height="32">
                            <span class="hide-mobile ms-2" style="font-size: 0.875rem;">Sarah Johnson</span>
                            <i class="bi bi-chevron-down hide-mobile ms-1" style="font-size: 0.75rem;"></i>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li class="px-3 py-2 border-bottom">
                                <div class="d-flex align-items-center">
                                    <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&h=100&fit=crop&crop=faces"
                                         alt="User"
                                         width="48"
                                         height="48"
                                         class="rounded-circle">
                                    <div class="ms-3">
                                        <div class="fw-semibold">Sarah Johnson</div>
                                        <div class="text-muted small">sarah.johnson@kiaalap.edu</div>
                                    </div>
                                </div>
                            </li>
                            <li><a class="dropdown-item" href="#"><i class="bi bi-person me-2"></i> Profile</a></li>
                            <li><a class="dropdown-item" href="#"><i class="bi bi-gear me-2"></i> Settings</a></li>
                            <li><a class="dropdown-item" href="#"><i class="bi bi-bell me-2"></i> Preferences</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item text-danger" href="#"><i class="bi bi-box-arrow-right me-2"></i> Sign Out</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Dashboard Content -->
        <main class="dashboard-content" id="main-content" role="main">
            <!-- Page Header -->
            <div class="mb-4">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h1 class="h3 font-bold">Add New Department</h1>
                        <p class="text-muted text-sm">Create a new academic department with comprehensive information and settings.</p>
                    </div>
                    <div class="d-flex gap-2">
                        <a href="departments.html" class="btn btn-outline-secondary">
                            <i class="bi bi-arrow-left me-2"></i>Back to Departments
                        </a>
                        <button class="btn btn-outline-info" data-bs-toggle="modal" data-bs-target="#templateModal">
                            <i class="bi bi-file-earmark-text me-2"></i>Use Template
                        </button>
                    </div>
                </div>
            </div>

            <!-- Form Progress -->
            <div class="dashboard-row">
                <div class="dashboard-card mb-4">
                    <div class="dashboard-card-body py-3">
                        <div class="progress-header d-flex justify-content-between align-items-center mb-3">
                            <h6 class="mb-0">Form Progress</h6>
                            <span class="badge bg-primary progress-badge">Step 1 of 3</span>
                        </div>
                        <div class="progress" style="height: 8px;">
                            <div class="progress-bar bg-primary progress-bar-striped progress-bar-animated"
                                 role="progressbar" style="width: 33%"
                                 aria-valuenow="33" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Add Department Form -->
            <form id="addDepartmentForm" class="needs-validation" novalidate>
                <!-- Department Information -->
                <div class="dashboard-row">
                    <div class="dashboard-card">
                        <div class="dashboard-card-header">
                            <div class="d-flex align-items-center">
                                <div class="form-step-icon bg-primary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                                    <i class="bi bi-building text-primary"></i>
                                </div>
                                <div>
                                    <h5 class="mb-0">Department Information</h5>
                                    <p class="text-muted small mb-0">Basic department details and identification</p>
                                </div>
                            </div>
                        </div>
                        <div class="dashboard-card-body">
                            <div class="row g-4">
                                <div class="col-md-6">
                                    <label for="departmentName" class="form-label">Department Name *</label>
                                    <input type="text"
                                           class="form-control"
                                           id="departmentName"
                                           name="departmentName"
                                           placeholder="e.g., Computer Science"
                                           required>
                                    <div class="invalid-feedback">
                                        Please provide a valid department name.
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label for="departmentCode" class="form-label">Department Code *</label>
                                    <input type="text"
                                           class="form-control"
                                           id="departmentCode"
                                           name="departmentCode"
                                           placeholder="e.g., CS"
                                           pattern="[A-Z]{2,5}"
                                           maxlength="5"
                                           style="text-transform: uppercase;"
                                           required>
                                    <div class="form-text">2-5 uppercase letters (e.g., CS, MECH, BBA)</div>
                                    <div class="invalid-feedback">
                                        Please provide a valid department code (2-5 uppercase letters).
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label for="establishedYear" class="form-label">Established Year</label>
                                    <input type="number"
                                           class="form-control"
                                           id="establishedYear"
                                           name="establishedYear"
                                           min="1900"
                                           max="2025"
                                           placeholder="e.g., 1995">
                                    <div class="invalid-feedback">
                                        Please provide a valid year between 1900 and 2025.
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label for="departmentStatus" class="form-label">Status *</label>
                                    <select class="form-select" id="departmentStatus" name="departmentStatus" required>
                                        <option value="">Choose status...</option>
                                        <option value="active">Active</option>
                                        <option value="planning">Planning Phase</option>
                                        <option value="paused">Temporarily Paused</option>
                                        <option value="disabled">Disabled</option>
                                    </select>
                                    <div class="invalid-feedback">
                                        Please select a department status.
                                    </div>
                                </div>
                                <div class="col-12">
                                    <label for="description" class="form-label">Department Description</label>
                                    <textarea class="form-control"
                                              id="description"
                                              name="description"
                                              rows="4"
                                              placeholder="Provide a comprehensive description of the department, its mission, and objectives..."></textarea>
                                    <div class="form-text">Optional: Describe the department's mission, vision, and primary objectives.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Department Head Information -->
                <div class="dashboard-row">
                    <div class="dashboard-card">
                        <div class="dashboard-card-header">
                            <div class="d-flex align-items-center">
                                <div class="form-step-icon bg-success bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                                    <i class="bi bi-person-badge text-success"></i>
                                </div>
                                <div>
                                    <h5 class="mb-0">Department Head Information</h5>
                                    <p class="text-muted small mb-0">Contact and leadership details</p>
                                </div>
                            </div>
                        </div>
                        <div class="dashboard-card-body">
                            <div class="row g-4">
                                <div class="col-md-6">
                                    <label for="headName" class="form-label">Department Head Name *</label>
                                    <input type="text"
                                           class="form-control"
                                           id="headName"
                                           name="headName"
                                           placeholder="e.g., Dr. John Smith"
                                           required>
                                    <div class="invalid-feedback">
                                        Please provide the department head's name.
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label for="headTitle" class="form-label">Title/Position</label>
                                    <input type="text"
                                           class="form-control"
                                           id="headTitle"
                                           name="headTitle"
                                           placeholder="e.g., Professor, Associate Professor"
                                           value="Professor">
                                </div>
                                <div class="col-md-6">
                                    <label for="headEmail" class="form-label">Email Address *</label>
                                    <input type="email"
                                           class="form-control"
                                           id="headEmail"
                                           name="headEmail"
                                           placeholder="john.smith@kiaalap.edu"
                                           required>
                                    <div class="invalid-feedback">
                                        Please provide a valid email address.
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label for="headPhone" class="form-label">Phone Number</label>
                                    <input type="tel"
                                           class="form-control"
                                           id="headPhone"
                                           name="headPhone"
                                           placeholder="+1-555-0123"
                                           pattern="[\+]?[0-9\-\s\(\)]+"
                                           maxlength="20">
                                    <div class="invalid-feedback">
                                        Please provide a valid phone number.
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label for="officeLocation" class="form-label">Office Location</label>
                                    <input type="text"
                                           class="form-control"
                                           id="officeLocation"
                                           name="officeLocation"
                                           placeholder="e.g., Building A, Room 301">
                                </div>
                                <div class="col-md-6">
                                    <label for="appointmentDate" class="form-label">Appointment Date</label>
                                    <input type="date"
                                           class="form-control"
                                           id="appointmentDate"
                                           name="appointmentDate">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Department Metrics & Budget -->
                <div class="dashboard-row">
                    <div class="dashboard-card">
                        <div class="dashboard-card-header">
                            <div class="d-flex align-items-center">
                                <div class="form-step-icon bg-info bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                                    <i class="bi bi-graph-up text-info"></i>
                                </div>
                                <div>
                                    <h5 class="mb-0">Department Metrics & Budget</h5>
                                    <p class="text-muted small mb-0">Financial and enrollment information</p>
                                </div>
                            </div>
                        </div>
                        <div class="dashboard-card-body">
                            <div class="row g-4">
                                <div class="col-md-4">
                                    <label for="currentStudents" class="form-label">Current Students</label>
                                    <input type="number"
                                           class="form-control"
                                           id="currentStudents"
                                           name="currentStudents"
                                           min="0"
                                           placeholder="0"
                                           value="0">
                                </div>
                                <div class="col-md-4">
                                    <label for="maxCapacity" class="form-label">Maximum Capacity</label>
                                    <input type="number"
                                           class="form-control"
                                           id="maxCapacity"
                                           name="maxCapacity"
                                           min="1"
                                           placeholder="e.g., 2000">
                                </div>
                                <div class="col-md-4">
                                    <label for="facultyCount" class="form-label">Faculty Members</label>
                                    <input type="number"
                                           class="form-control"
                                           id="facultyCount"
                                           name="facultyCount"
                                           min="0"
                                           placeholder="0"
                                           value="0">
                                </div>
                                <div class="col-md-6">
                                    <label for="annualBudget" class="form-label">Annual Budget (USD)</label>
                                    <div class="input-group">
                                        <span class="input-group-text">$</span>
                                        <input type="number"
                                               class="form-control"
                                               id="annualBudget"
                                               name="annualBudget"
                                               min="0"
                                               step="1000"
                                               placeholder="0">
                                        <span class="input-group-text">.00</span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label for="budgetYear" class="form-label">Budget Year</label>
                                    <select class="form-select" id="budgetYear" name="budgetYear">
                                        <option value="">Select year...</option>
                                        <option value="2024">2024</option>
                                        <option value="2025" selected>2025</option>
                                        <option value="2026">2026</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Additional Settings -->
                <div class="dashboard-row">
                    <div class="dashboard-card">
                        <div class="dashboard-card-header">
                            <div class="d-flex align-items-center">
                                <div class="form-step-icon bg-warning bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                                    <i class="bi bi-gear text-warning"></i>
                                </div>
                                <div>
                                    <h5 class="mb-0">Additional Settings</h5>
                                    <p class="text-muted small mb-0">Optional configuration and features</p>
                                </div>
                            </div>
                        </div>
                        <div class="dashboard-card-body">
                            <div class="row g-4">
                                <div class="col-md-12">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="allowOnlineApplication" name="allowOnlineApplication" checked>
                                        <label class="form-check-label" for="allowOnlineApplication">
                                            Allow Online Applications
                                        </label>
                                        <div class="form-text">Students can apply to this department through the online portal</div>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="enableNotifications" name="enableNotifications" checked>
                                        <label class="form-check-label" for="enableNotifications">
                                            Enable Email Notifications
                                        </label>
                                        <div class="form-text">Department head will receive email notifications for important updates</div>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="publiclyVisible" name="publiclyVisible" checked>
                                        <label class="form-check-label" for="publiclyVisible">
                                            Publicly Visible
                                        </label>
                                        <div class="form-text">Department information will be visible on the public website</div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label for="departmentWebsite" class="form-label">Department Website</label>
                                    <input type="url"
                                           class="form-control"
                                           id="departmentWebsite"
                                           name="departmentWebsite"
                                           placeholder="https://cs.kiaalap.edu">
                                    <div class="form-text">Optional: Department's dedicated website URL</div>
                                </div>
                                <div class="col-md-6">
                                    <label for="socialMedia" class="form-label">Social Media</label>
                                    <input type="url"
                                           class="form-control"
                                           id="socialMedia"
                                           name="socialMedia"
                                           placeholder="https://linkedin.com/company/kiaalap-cs">
                                    <div class="form-text">Optional: LinkedIn, Twitter, or Facebook page</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Form Actions -->
                <div class="dashboard-row">
                    <div class="dashboard-card">
                        <div class="dashboard-card-body">
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="form-text">
                                    <i class="bi bi-info-circle me-1"></i>
                                    Fields marked with * are required. You can edit all information later.
                                </div>
                                <div class="d-flex gap-2">
                                    <button type="button" class="btn btn-outline-secondary" id="saveDraft">
                                        <i class="bi bi-file-earmark me-2"></i>Save as Draft
                                    </button>
                                    <button type="button" class="btn btn-outline-info" id="previewDepartment">
                                        <i class="bi bi-eye me-2"></i>Preview
                                    </button>
                                    <button type="submit" class="btn btn-primary">
                                        <i class="bi bi-check-circle me-2"></i>Create Department
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </main>

        <!-- Footer -->
        <footer class="dashboard-footer">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-6">
                        <p class="mb-0">&copy; 2025 Kiaalap. All rights reserved.</p>
                    </div>
                    <div class="col-md-6 text-md-end">
                        <p class="mb-0">Built with <i class="bi bi-heart-fill text-danger"></i> for education</p>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- Template Selection Modal -->
    <div class="modal fade" id="templateModal" tabindex="-1" aria-labelledby="templateModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="templateModalLabel">Choose Department Template</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <div class="card template-card h-100" data-template="engineering">
                                <div class="card-body text-center">
                                    <div class="template-icon bg-primary bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                                        <i class="bi bi-gear-fill text-primary" style="font-size: 24px;"></i>
                                    </div>
                                    <h6 class="card-title">Engineering</h6>
                                    <p class="card-text small text-muted">Template for engineering departments (CS, Mechanical, Electrical, etc.)</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card template-card h-100" data-template="business">
                                <div class="card-body text-center">
                                    <div class="template-icon bg-success bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                                        <i class="bi bi-briefcase-fill text-success" style="font-size: 24px;"></i>
                                    </div>
                                    <h6 class="card-title">Business</h6>
                                    <p class="card-text small text-muted">Template for business departments (MBA, Finance, Marketing, etc.)</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card template-card h-100" data-template="science">
                                <div class="card-body text-center">
                                    <div class="template-icon bg-info bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                                        <i class="bi bi-flask text-info" style="font-size: 24px;"></i>
                                    </div>
                                    <h6 class="card-title">Science</h6>
                                    <p class="card-text small text-muted">Template for science departments (Biology, Chemistry, Physics, etc.)</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card template-card h-100" data-template="liberal-arts">
                                <div class="card-body text-center">
                                    <div class="template-icon bg-warning bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                                        <i class="bi bi-palette-fill text-warning" style="font-size: 24px;"></i>
                                    </div>
                                    <h6 class="card-title">Liberal Arts</h6>
                                    <p class="card-text small text-muted">Template for liberal arts departments (English, History, Philosophy, etc.)</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="applyTemplate" disabled>Apply Template</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Preview Modal -->
    <div class="modal fade" id="previewModal" tabindex="-1" aria-labelledby="previewModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="previewModalLabel">Department Preview</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="previewContent">
                        <!-- Preview content will be generated here -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="confirmCreate">Create Department</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header border-0">
                    <h5 class="modal-title" id="successModalLabel">
                        <i class="bi bi-check-circle-fill text-success me-2"></i>Success!
                    </h5>
                </div>
                <div class="modal-body text-center">
                    <div class="success-icon bg-success bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                        <i class="bi bi-building text-success" style="font-size: 32px;"></i>
                    </div>
                    <h6 class="mb-2">Department Created Successfully!</h6>
                    <p class="text-muted small mb-0">The new department has been added to your institution and is now available in the system.</p>
                </div>
                <div class="modal-footer border-0 justify-content-center">
                    <a href="departments.html" class="btn btn-primary">View All Departments</a>
                    <button type="button" class="btn btn-outline-primary" onclick="location.reload()">Add Another Department</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts with defer -->
    <script src="node_modules/bootstrap/dist/js/bootstrap.bundle.min.js" defer></script>
    <script src="src/js/dashboard.js" defer></script>

    <script defer>
        document.addEventListener('DOMContentLoaded', function() {
            // Form validation
            const form = document.getElementById('addDepartmentForm');
            const progressBar = document.querySelector('.progress-bar');
            const progressBadge = document.querySelector('.progress-badge');

            // Auto-uppercase department code
            const deptCodeInput = document.getElementById('departmentCode');
            deptCodeInput.addEventListener('input', function() {
                this.value = this.value.toUpperCase().replace(/[^A-Z]/g, '');
            });

            // Template selection
            const templateCards = document.querySelectorAll('.template-card');
            const applyTemplateBtn = document.getElementById('applyTemplate');
            let selectedTemplate = null;

            templateCards.forEach(card => {
                card.addEventListener('click', function() {
                    templateCards.forEach(c => c.classList.remove('border-primary'));
                    this.classList.add('border-primary');
                    selectedTemplate = this.dataset.template;
                    applyTemplateBtn.disabled = false;
                });
            });

            // Apply template
            applyTemplateBtn.addEventListener('click', function() {
                const templates = {
                    engineering: {
                        name: 'Computer Science',
                        code: 'CS',
                        head: 'Dr. John Smith',
                        email: 'john.smith@kiaalap.edu',
                        maxCapacity: 2000,
                        description: 'The Computer Science department focuses on software engineering, artificial intelligence, cybersecurity, and computer systems.'
                    },
                    business: {
                        name: 'Business Administration',
                        code: 'BBA',
                        head: 'Dr. Sarah Johnson',
                        email: 'sarah.johnson@kiaalap.edu',
                        maxCapacity: 1500,
                        description: 'The Business Administration department offers comprehensive programs in management, finance, marketing, and entrepreneurship.'
                    },
                    science: {
                        name: 'Biology',
                        code: 'BIO',
                        head: 'Dr. Michael Brown',
                        email: 'michael.brown@kiaalap.edu',
                        maxCapacity: 800,
                        description: 'The Biology department provides cutting-edge education in life sciences, biotechnology, and medical research.'
                    },
                    'liberal-arts': {
                        name: 'English Literature',
                        code: 'ENG',
                        head: 'Dr. Emma Davis',
                        email: 'emma.davis@kiaalap.edu',
                        maxCapacity: 600,
                        description: 'The English Literature department offers comprehensive studies in literature, creative writing, and linguistic analysis.'
                    }
                };

                const template = templates[selectedTemplate];
                if (template) {
                    document.getElementById('departmentName').value = template.name;
                    document.getElementById('departmentCode').value = template.code;
                    document.getElementById('headName').value = template.head;
                    document.getElementById('headEmail').value = template.email;
                    document.getElementById('maxCapacity').value = template.maxCapacity;
                    document.getElementById('description').value = template.description;
                    document.getElementById('departmentStatus').value = 'active';

                    // Close modal
                    const modal = bootstrap.Modal.getInstance(document.getElementById('templateModal'));
                    modal.hide();

                    // Update progress
                    updateProgress();
                }
            });

            // Preview functionality
            document.getElementById('previewDepartment').addEventListener('click', function() {
                generatePreview();
            });

            function generatePreview() {
                const formData = new FormData(form);
                const previewContent = document.getElementById('previewContent');

                previewContent.innerHTML = `
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Department Information</h6>
                            <table class="table table-sm">
                                <tr><th>Name:</th><td>${formData.get('departmentName') || 'Not specified'}</td></tr>
                                <tr><th>Code:</th><td>${formData.get('departmentCode') || 'Not specified'}</td></tr>
                                <tr><th>Status:</th><td><span class="badge bg-${formData.get('departmentStatus') === 'active' ? 'success' : 'warning'}">${formData.get('departmentStatus') || 'Not specified'}</span></td></tr>
                                <tr><th>Established:</th><td>${formData.get('establishedYear') || 'Not specified'}</td></tr>
                            </table>
                        </div>
                        <div class="col-md-6">
                            <h6>Department Head</h6>
                            <table class="table table-sm">
                                <tr><th>Name:</th><td>${formData.get('headName') || 'Not specified'}</td></tr>
                                <tr><th>Email:</th><td>${formData.get('headEmail') || 'Not specified'}</td></tr>
                                <tr><th>Phone:</th><td>${formData.get('headPhone') || 'Not specified'}</td></tr>
                                <tr><th>Office:</th><td>${formData.get('officeLocation') || 'Not specified'}</td></tr>
                            </table>
                        </div>
                        <div class="col-12 mt-3">
                            <h6>Description</h6>
                            <p class="text-muted">${formData.get('description') || 'No description provided'}</p>
                        </div>
                    </div>
                `;

                const previewModal = new bootstrap.Modal(document.getElementById('previewModal'));
                previewModal.show();
            }

            // Form submission
            form.addEventListener('submit', function(event) {
                event.preventDefault();
                event.stopPropagation();

                if (form.checkValidity()) {
                    // Simulate form submission
                    const submitBtn = form.querySelector('button[type="submit"]');
                    const originalText = submitBtn.innerHTML;

                    submitBtn.disabled = true;
                    submitBtn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Creating...';

                    setTimeout(() => {
                        submitBtn.disabled = false;
                        submitBtn.innerHTML = originalText;

                        const successModal = new bootstrap.Modal(document.getElementById('successModal'));
                        successModal.show();
                    }, 2000);
                } else {
                    // Show validation errors
                    const firstInvalid = form.querySelector(':invalid');
                    if (firstInvalid) {
                        firstInvalid.focus();
                        firstInvalid.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }

                form.classList.add('was-validated');
            });

            // Progress tracking
            function updateProgress() {
                const requiredFields = form.querySelectorAll('[required]');
                let filledFields = 0;

                requiredFields.forEach(field => {
                    if (field.value.trim()) filledFields++;
                });

                const progress = Math.round((filledFields / requiredFields.length) * 100);
                progressBar.style.width = progress + '%';
                progressBar.setAttribute('aria-valuenow', progress);

                if (progress < 34) {
                    progressBadge.textContent = 'Step 1 of 3';
                } else if (progress < 67) {
                    progressBadge.textContent = 'Step 2 of 3';
                } else {
                    progressBadge.textContent = 'Step 3 of 3';
                }
            }

            // Update progress on input changes
            form.addEventListener('input', updateProgress);
            form.addEventListener('change', updateProgress);

            // Save draft functionality
            document.getElementById('saveDraft').addEventListener('click', function() {
                const formData = new FormData(form);
                const draftData = {};
                for (let [key, value] of formData.entries()) {
                    draftData[key] = value;
                }

                localStorage.setItem('departmentDraft', JSON.stringify(draftData));

                // Show confirmation
                const toast = document.createElement('div');
                toast.className = 'toast position-fixed top-0 end-0 m-3';
                toast.innerHTML = `
                    <div class="toast-body">
                        <i class="bi bi-check-circle text-success me-2"></i>
                        Draft saved successfully!
                    </div>
                `;
                document.body.appendChild(toast);

                const bsToast = new bootstrap.Toast(toast);
                bsToast.show();

                toast.addEventListener('hidden.bs.toast', () => {
                    document.body.removeChild(toast);
                });
            });

            // Load draft on page load
            const savedDraft = localStorage.getItem('departmentDraft');
            if (savedDraft) {
                const draftData = JSON.parse(savedDraft);
                Object.keys(draftData).forEach(key => {
                    const field = form.querySelector(`[name="${key}"]`);
                    if (field) {
                        if (field.type === 'checkbox') {
                            field.checked = draftData[key] === 'on';
                        } else {
                            field.value = draftData[key];
                        }
                    }
                });
                updateProgress();
            }

            // Initial progress update
            updateProgress();
        });
    </script>
</body>
</html>