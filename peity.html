{{> head}}

<style>
/* Critical CSS for immediate render */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: #f5f7fa; }
        .sidebar { position: fixed; left: 0; top: 0; width: 260px; height: 100vh; background: #1f2937; z-index: 1040; }
        .main-wrapper { margin-left: 260px; min-height: 100vh; transition: margin-left 0.3s ease; }
        .top-navbar { background: white; height: 60px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); padding: 0 1rem; }
        .dashboard-content { padding: 24px; }

        /* Loading animation */
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .loading { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; background: #e5e7eb; }
</style>

{{> sidebar}}

<!-- Main Content Wrapper -->
<div class="main-wrapper" id="mainWrapper">
    {{> header}}

    <!-- Main Content -->
    <main class="dashboard-content" id="main-content">
        <div class="container-fluid">
<!-- Page Header -->
            <div class="mb-3">
                <h1 class="h3 font-bold">Peity Charts</h1>
                <p class="text-muted text-sm">Lightweight inline SVG charts for simple and elegant data visualization</p>
            </div>

            <!-- Charts Grid -->
            <div class="dashboard-grid">
                <!-- Line Charts Row -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <div class="card-title-wrapper">
                            <h3 class="card-title">Line Charts</h3>
                            <p class="card-subtitle">Inline trend visualizations</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3">
                                <div class="peity-chart-item">
                                    <div class="peity-chart-title">Enrollment Trend</div>
                                    <div class="peity-chart-value">1,234</div>
                                    <div class="peity-chart-container">
                                        <canvas class="mini-chart" data-chart="line" data-values="5,3,9,6,5,9,7,3,5,2" width="120" height="40"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="peity-chart-item">
                                    <div class="peity-chart-title">Course Completion</div>
                                    <div class="peity-chart-value">892</div>
                                    <div class="peity-chart-container">
                                        <canvas class="mini-chart" data-chart="line" data-values="3,4,3,5,4,5,6,3,3,4" width="120" height="40"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="peity-chart-item">
                                    <div class="peity-chart-title">Active Students</div>
                                    <div class="peity-chart-value">567</div>
                                    <div class="peity-chart-container">
                                        <canvas class="mini-chart" data-chart="line" data-values="2,7,4,8,2,8,6,4,6,2" width="120" height="40"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="peity-chart-item">
                                    <div class="peity-chart-title">Graduate Rate</div>
                                    <div class="peity-chart-value">345</div>
                                    <div class="peity-chart-container">
                                        <canvas class="mini-chart" data-chart="line" data-values="6,3,8,4,7,3,8,5,4,7" width="120" height="40"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bar Charts Row -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <div class="card-title-wrapper">
                            <h3 class="card-title">Bar Charts</h3>
                            <p class="card-subtitle">Performance comparisons</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3">
                                <div class="peity-chart-item">
                                    <div class="peity-chart-title">Department Performance</div>
                                    <div class="peity-chart-value">78%</div>
                                    <div class="peity-chart-container">
                                        <canvas class="mini-chart" data-chart="bar" data-values="5,3,9,6,5,9,7,3,5,2" width="120" height="40"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="peity-chart-item">
                                    <div class="peity-chart-title">Faculty Satisfaction</div>
                                    <div class="peity-chart-value">85%</div>
                                    <div class="peity-chart-container">
                                        <canvas class="mini-chart" data-chart="bar" data-values="3,4,3,5,4,5,6,3,3,4" width="120" height="40"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="peity-chart-item">
                                    <div class="peity-chart-title">Resource Usage</div>
                                    <div class="peity-chart-value">92%</div>
                                    <div class="peity-chart-container">
                                        <canvas class="mini-chart" data-chart="bar" data-values="2,7,4,8,2,8,6,4,6,2" width="120" height="40"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="peity-chart-item">
                                    <div class="peity-chart-title">Technology Adoption</div>
                                    <div class="peity-chart-value">67%</div>
                                    <div class="peity-chart-container">
                                        <canvas class="mini-chart" data-chart="bar" data-values="6,3,8,4,7,3,8,5,4,7" width="120" height="40"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Pie Charts Row -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <div class="card-title-wrapper">
                            <h3 class="card-title">Pie Charts</h3>
                            <p class="card-subtitle">Distribution analysis</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="peity-chart-item">
                                    <div class="peity-chart-title">Student Distribution</div>
                                    <div class="peity-chart-value">Total: 1,500</div>
                                    <div class="peity-chart-container">
                                        <canvas class="mini-chart" data-chart="pie" data-values="226,134,101,85" width="80" height="80"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="peity-chart-item">
                                    <div class="peity-chart-title">Course Categories</div>
                                    <div class="peity-chart-value">Total: 450</div>
                                    <div class="peity-chart-container">
                                        <canvas class="mini-chart" data-chart="pie" data-values="120,180,150" width="80" height="80"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Donut Charts Row -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <div class="card-title-wrapper">
                            <h3 class="card-title">Donut Charts</h3>
                            <p class="card-subtitle">Proportional data visualization</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="peity-chart-item">
                                    <div class="peity-chart-title">Budget Allocation</div>
                                    <div class="peity-chart-value">$2.5M</div>
                                    <div class="peity-chart-container">
                                        <canvas class="mini-chart" data-chart="doughnut" data-values="35,25,20,20" width="80" height="80"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="peity-chart-item">
                                    <div class="peity-chart-title">Grade Distribution</div>
                                    <div class="peity-chart-value">Total: 850</div>
                                    <div class="peity-chart-container">
                                        <canvas class="mini-chart" data-chart="doughnut" data-values="200,180,150,120" width="80" height="80"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>        </div>
    </main>

    {{> footer}}
</div>

{{> scripts}}

<script>
document.addEventListener('DOMContentLoaded', function() {
    try {
        const charts = [];

        // Initialize all mini charts
        document.querySelectorAll('.mini-chart').forEach((canvas, index) => {
            const ctx = canvas.getContext('2d');
            const chartType = canvas.dataset.chart;
            const values = canvas.dataset.values.split(',').map(Number);

            let config = {};

            if (chartType === 'line') {
                config = {
                    type: 'line',
                    data: {
                        labels: values.map((_, i) => ''),
                        datasets: [{
                            data: values,
                            borderColor: '#36a2eb',
                            backgroundColor: 'rgba(54, 162, 235, 0.2)',
                            borderWidth: 2,
                            fill: true,
                            tension: 0.4,
                            pointRadius: 0,
                            pointHoverRadius: 3
                        }]
                    },
                    options: {
                        responsive: false,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        scales: {
                            x: { display: false },
                            y: { display: false }
                        },
                        elements: { line: { borderWidth: 1 } }
                    }
                };
            } else if (chartType === 'bar') {
                config = {
                    type: 'bar',
                    data: {
                        labels: values.map((_, i) => ''),
                        datasets: [{
                            data: values,
                            backgroundColor: ['#007bff', '#28a745', '#ffc107', '#dc3545', '#6f42c1', '#fd7e14', '#20c997', '#e83e8c'].slice(0, values.length)
                        }]
                    },
                    options: {
                        responsive: false,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        scales: {
                            x: { display: false },
                            y: { display: false }
                        }
                    }
                };
            } else if (chartType === 'pie' || chartType === 'doughnut') {
                config = {
                    type: chartType,
                    data: {
                        datasets: [{
                            data: values,
                            backgroundColor: ['#007bff', '#28a745', '#ffc107', '#dc3545', '#6f42c1', '#fd7e14'].slice(0, values.length)
                        }]
                    },
                    options: {
                        responsive: false,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        cutout: chartType === 'doughnut' ? '50%' : '0%'
                    }
                };
            }

            const chart = new Chart(ctx, config);
            charts.push({ canvas, chart, values: [...values] });
        });

        console.log('All Chart.js mini charts initialized successfully');

        // Auto-refresh charts with new data every 5 seconds for demonstration
        setInterval(function() {
            charts.forEach(({ chart, canvas }) => {
                if (canvas.dataset.chart === 'line' || canvas.dataset.chart === 'bar') {
                    const newData = [];
                    for (let i = 0; i < chart.data.datasets[0].data.length; i++) {
                        newData.push(Math.floor(Math.random() * 10) + 1);
                    }
                    chart.data.datasets[0].data = newData;
                    chart.update('none');
                }
            });
        }, 5000);

    } catch (error) {
        console.error('Error initializing Chart.js mini charts:', error);
    }
});
</script>